---
import Button from "../components/ui/Button.astro";
import { Picture } from "astro:assets";
import { Image } from "astro:assets";
import { getCollection } from "astro:content";

const instagramFeeds = await getCollection("instagramFeeds");
---

<section id="dernierement" class="bg-secondary justify-items-center px-4 py-32">
  <h2 class="font-heading pb-8 text-center text-2xl font-extrabold uppercase">
    Dernières réalisations
  </h2>
  <span class="bg-primary mb-8 block h-1 w-10"></span>
  <div class="mx-auto max-w-7xl">
    <div class="rounded-lg p-4">
      <div class="grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4">
        {
          instagramFeeds.map((feed) => (
            <div class="aspect-[1/1] w-full overflow-hidden rounded-md shadow-sm">
              <Picture
                src={feed.data.image as ImageMetadata}
                alt={`Publication Instagram - ${feed.data.alt}`}
                class="h-full w-full object-cover"
                loading="lazy"
                formats={["avif", "webp", "jpeg"]}
                decoding="async"
                quality={80}
                width={300}
                height={300}
                sizes="(max-width: 640px) 50vw, (max-width: 768px) 33vw, 25vw"
              />
            </div>
          ))
        }
      </div>

      <div class="mt-8 text-center">
        <Button
          href="https://www.instagram.com/lunedit_packaging/"
          target="_blank"
          variant="primary"
          size="large"
          aria-label="Voir plus de réalisations sur Instagram"
          class="flex items-center gap-2"
        >
          <span>Plus de réalisations</span>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="16"
            viewBox="0 0 24 24"
          >
            <path
              fill="none"
              stroke="currentColor"
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M12 6H6a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-6m-7 1l9-9m-5 0h5v5"
            ></path></svg
          >
        </Button>
      </div>
    </div>
  </div>
</section>
